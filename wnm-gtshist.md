= wnm-gtshist.rb
現状のWNMスプールをスキャンして、GTS電文のヘッダ毎の入電状況を把握する
== 書式
ruby wnm-gtshist.rb _stream_ [_yesterdayhist_]

ここで _stream_ は devnode, devgc, jmagc のひとつ。
== 動作
プログラムはスプール /nwp/m0/{stream}*.tar.gz および過去の履歴ファイル
_yesterdayhist_ を読み込み、今日の履歴を出力する。
過去の履歴ファイルはデフォルトでは
/nwp/m1/{yesterday-mon}/{stream}gts{yesterday}.txt が読み込まれる。
== 出力
履歴ファイルはCSV形式で、次のカラムからなる。
* ヘッダ (TTAAiiCCCC の形式)
* 初出日時
* 最終出現日時
* 最大欠配日数 (欠配日数=最終出現日と昨日の差)
* 最大欠配日数の最終出現日時 (欠配日数が最大を超えるアラートを初回は抑止するため)
初回実行 (または過去の履歴ファイルが得られない場合) は、次のようになる。
* ヘッダ: スプールにあるものだけが出る
* 初出日時: スプールで得た最初の日時
* 最終出現日時: スプールで得た最後の日時
* 最大欠配日数: 0
* 最大欠配日数の最終出現日時: 初出日時
各列が更新されるときはこういう値によってである。
* ヘッダ: スプールに新しいヘッダがあるとき（各列は初回実行時値に）
* 初出日時: 変更されない
* 最終出現日時: スプールで得た最後の日時
* 最大欠配日数: 欠配日数が過去履歴以上のとき
* 最大欠配日数の最終出現日時: 欠配日数が過去履歴以上のとき

